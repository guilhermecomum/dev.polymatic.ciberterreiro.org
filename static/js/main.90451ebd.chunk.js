(this.webpackJsonpPolymatic=this.webpackJsonpPolymatic||[]).push([[0],Array(70).concat([function(e,t,a){e.exports=a.p+"static/media/agogo1.1065034e.wav"},function(e,t,a){e.exports=a.p+"static/media/agogo2.0e4e658f.wav"},function(e,t,a){e.exports=a.p+"static/media/caxixi.f6ddaabb.wav"},function(e,t,a){e.exports=a.p+"static/media/kick1.d96070b8.wav"},function(e,t,a){e.exports=a.p+"static/media/snare.ac6ee711.wav"},function(e,t,a){e.exports=a.p+"static/media/surdo1.4c11d5fa.wav"},function(e,t,a){e.exports=a.p+"static/media/surdo2.de3c5a5c.wav"},function(e,t,a){e.exports=a.p+"static/media/surdo3.d327f3d9.wav"},function(e,t,a){e.exports=a.p+"static/media/surdo4.5e1800e9.wav"},function(e,t,a){e.exports=a.p+"static/media/tamborim1.a6cbfb58.wav"},function(e,t,a){e.exports=a.p+"static/media/tamborim2.06bd97bb.wav"},function(e,t,a){e.exports=a.p+"static/media/block1.d9f8c3a9.wav"},function(e,t,a){e.exports=a.p+"static/media/block2.7e7a9a59.wav"},function(e,t,a){e.exports=a.p+"static/media/conga1.41b2f57f.wav"},function(e,t,a){e.exports=a.p+"static/media/conga2.5cc86b71.wav"},function(e,t,a){e.exports=a.p+"static/media/conga3.435be93f.wav"},function(e,t,a){e.exports=a.p+"static/media/conga4.a38157fd.wav"},function(e,t,a){e.exports=a.p+"static/media/cowbell.566cddac.wav"},function(e,t,a){e.exports=a.p+"static/media/egg1.cedb0f6a.wav"},function(e,t,a){e.exports=a.p+"static/media/egg2.714c0889.wav"},function(e,t,a){e.exports=a.p+"static/media/xequere1.c6ac1d9b.wav"},function(e,t,a){e.exports=a.p+"static/media/xequere2.0e563d7a.wav"},function(e,t,a){e.exports=a.p+"static/media/clap.7bdee98b.wav"},function(e,t,a){e.exports=a.p+"static/media/hat.f03a8f48.wav"},function(e,t,a){e.exports=a.p+"static/media/kick1.9621794a.wav"},function(e,t,a){e.exports=a.p+"static/media/kik2.c392cef6.wav"},function(e,t,a){e.exports=a.p+"static/media/kik3.557e0210.wav"},function(e,t,a){e.exports=a.p+"static/media/snare.4707aa1f.wav"},function(e,t,a){e.exports=a.p+"static/media/bass.b2419d4f.wav"},function(e,t,a){e.exports=a.p+"static/media/block.3753c44b.wav"},function(e,t,a){e.exports=a.p+"static/media/bum.4c11d5fa.wav"},function(e,t,a){e.exports=a.p+"static/media/claves.400c9ef3.wav"},function(e,t,a){e.exports=a.p+"static/media/cymbal.950d832b.wav"},function(e,t,a){e.exports=a.p+"static/media/djembe1.f3e648cb.wav"},function(e,t,a){e.exports=a.p+"static/media/djembe3.acef368f.wav"},function(e,t,a){e.exports=a.p+"static/media/djembe2.d38ab3d2.wav"},function(e,t,a){e.exports=a.p+"static/media/hit.a315148b.wav"},function(e,t,a){e.exports=a.p+"static/media/hithat.950d832b.wav"},function(e,t,a){e.exports=a.p+"static/media/kick2.18445a5e.wav"},function(e,t,a){e.exports=a.p+"static/media/kicklow.c09eab14.wav"},function(e,t,a){e.exports=a.p+"static/media/tamborim.a6cbfb58.wav"},,,,,,function(e){e.exports=JSON.parse('{"name":"Polymatic","version":"5.1.0","private":true,"homepage":"https://polymatic.ciberterreiro.org","dependencies":{"@fortawesome/fontawesome-svg-core":"^1.2.27","@fortawesome/free-solid-svg-icons":"^5.12.1","@fortawesome/react-fontawesome":"^0.1.9","@testing-library/jest-dom":"^4.2.4","@testing-library/react":"^9.3.2","@testing-library/user-event":"^7.1.2","beet.js":"^1.7.0","bootstrap":"^4.4.1","euclidean-rhythms":"^2.0.1","gh-pages":"^2.2.0","melanke-watchjs":"^1.5.2","node-sass":"^4.13.1","react":"^16.13.0","react-bootstrap":"^1.0.0-beta.17","react-bootstrap-range-slider":"^0.3.1","react-dom":"^16.13.0","react-ga":"^2.7.0","react-router-dom":"^5.1.2","react-scripts":"3.4.0","shortid":"^2.2.15","watchjs":"^0.0.0","webworkify-webpack":"^2.1.5"},"scripts":{"start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject","predeploy":"npm run build && cp CNAME build/CNAME","deploy":"gh-pages -b gh-pages -d build"},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"semantic-release":"^17.0.7"}}')},,,,,function(e,t,a){e.exports=a(149)},,,,,function(e,t,a){},,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t),t.default=function(e){var t=25,a=null;e.onmessage=function(e){"interval"===e.data&&(t=e.data.interval),"start"===e.data&&(a=setInterval((function(){postMessage("tick")}),t)),"stop"===e.data&&(clearInterval(a),a=null)}}},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(28),r=a.n(s),o=(a(126),a(13)),c=a(32),l=a(30),u=a(63);var m=function(){return i.a.createElement("div",{className:"about"},i.a.createElement("div",{className:"col-8 offset-2"},i.a.createElement("h3",null,"Polymatic!"),i.a.createElement("p",null,"projeto idealizado por Gil Amancio e Guilherme Guerra"),i.a.createElement("p",null,"O Polymatic \xe9 um aplicativo para fazer m\xfasica ou dar aula de m\xfasica a partir de outros paradigmas que orientam a cria\xe7\xe3o musical. Ele \xe9 inspirado nos modos de produ\xe7\xe3o da m\xfasica africana e da di\xe1spora. N\xe3o \xe9 um software para fazer m\xfasica no computador, mas sim, um aplicativo para fazer m\xfasica assistida por computador, ou seja, o computador \xe9 uma ferramenta para instigar a cria\xe7\xe3o e a execu\xe7\xe3o musical coletiva que acontece junto com o computador."),i.a.createElement("p",null,"O Polymatic \xe9 um aplicativo que gera padr\xf5es r\xedtmicos m\xednimos. Esses padr\xf5es t\xeam v\xe1rios nomes em diferentes lugares, clave em Cuba, timeline nos Estados Unidos e Europa, e no Brasil resolvi cham\xe1-los de Guia."),i.a.createElement("p",null,"A escolha do nome Guia veio da associa\xe7\xe3o dos registros desses padr\xf5es r\xedtmicos de forma circular, feito pelo m\xfasico Safi-alDin em Bagd\xe1 no ano de 1280, com as Guias usadas pelo povo dos terreiros."),i.a.createElement("p",null,"Do ponto de vista musical a guia \xe9 um ostinato, que se repete sem varia\xe7\xe3o, ao longo de uma pe\xe7a musical. Ela atua como um dispositivo estruturador da cria\xe7\xe3o musical, d\xe1 o tempero da levada e atua tamb\xe9m como um cron\xf4metro."),i.a.createElement("p",null,"Nos terreiros, a palavra guia tamb\xe9m tem v\xe1rios significados, ela pode se referir tanto ao colar utilizado pelas pessoas que frequentam o terreiro, como tamb\xe9m as entidades que s\xe3o chamadas de guias."),i.a.createElement("p",null,"Acredito que chamar de guia os padr\xf5es r\xedtmicos gerados pelo Polymatic, vai nos aproximar do pensamento das culturas dos povos africanos e das di\xe1sporas e de suas experi\xeancias coletivas de fazer m\xfasica. Uma m\xfasica que n\xe3o se separa da dan\xe7a e da vida."),i.a.createElement("p",null,"Esperamos que o Polymatic possa possibilitar que voc\xea re\xfana a fam\xedlia, as/os amigos/as e se for professor as/os estudantes para juntos fazerem m\xfasica a partir do pensamento musical africano e da di\xe1spora."),i.a.createElement("p",null,"Mas como isso acontece? Leia o nosso manual."),i.a.createElement("p",null,i.a.createElement("a",{href:"".concat("","/manual.pdf"),target:"_blank",rel:"noopener noreferrer"},"Baixar manual"))))},p=a(57),d=a.n(p),f=a(67),h=a(58),v=a.n(h),b=(a(130),a(11)),g=a.n(b),w=a(26),y=a(27),E=a(154),x=a(69),k=a(118),j=a(7),O={previewPattern:"",previewVisibility:!1,polymetric:!1,claves:[],shareableLink:"",isPlaying:!1,instruments:null,context:null},_=Object(n.createContext)(O),q=function(e){var t=e.children,a=_.Provider,s=i.a.useCallback((function(e,t){switch(t.type){case"load.app":return Object(j.a)(Object(j.a)({},e),{},{instruments:t.instruments,context:t.context});case"previewPattern.update":return Object(j.a)(Object(j.a)({},e),{},{previewPattern:t.pattern});case"preview.visibility":return Object(j.a)(Object(j.a)({},e),{},{previewVisibility:t.visible});case"claves.add":return Object(j.a)(Object(j.a)({},e),{},{claves:[].concat(Object(k.a)(e.claves),[t.clave])});case"claves.remove":var a=e.claves.filter((function(e){return e.id!==t.id}));return Object(j.a)(Object(j.a)({},e),{},{claves:a,polymetric:a.length>0&&e.polymetric});case"claves.removeAll":return Object(j.a)(Object(j.a)({},e),{},{claves:[],polymetric:!1});case"claves.share":var n=e.claves.map((function(e){return{sequence:e.pattern.sequence.join(""),tempo:e.tempo,sample:e.instrument}}));return Object(j.a)(Object(j.a)({},e),{},{shareableLink:JSON.stringify(n)});case"toggle.polymetric":return Object(j.a)(Object(j.a)({},e),{},{polymetric:!e.polymetric});case"start.all":return Object(j.a)(Object(j.a)({},e),{},{isPlaying:!0});case"stop.all":return Object(j.a)(Object(j.a)({},e),{},{isPlaying:!1});default:throw new Error("C\xeas\xe1siessionibuspassnasavassi?")}}),[]),r=Object(n.useReducer)(s,O),c=Object(o.a)(r,2),l=c[0],u=c[1];return i.a.createElement(a,{value:{state:l,dispatch:u}},t)};_.Consumer;function P(e){var t=e.clave,a=Object(n.useRef)(),s=Object(n.useState)(100),r=Object(o.a)(s,2),c=r[0],l=r[1],u=t.pattern.sequence,m=t.tempo,p=t.clavis,d=t.instrument,f=Object(n.useState)(0),h=Object(o.a)(f,2),b=h[0],k=h[1],j=Object(n.useContext)(_).dispatch,O=Object(n.useContext)(_).state;Object(n.useEffect)((function(){p.configure(a.current,u,m),p.draw(),O.isPlaying&&t.start()}),[O.isPlaying,t,p,u,m]);return i.a.createElement("div",{className:"layer"},i.a.createElement("canvas",{id:g.a.generate(),ref:a,width:640,height:425}),i.a.createElement("div",{className:"mt-2 volume"},i.a.createElement("span",{className:"mr-2"},"Rota\xe7\xe3o"),i.a.createElement(v.a,{value:b,min:1,max:u.join("").length,onChange:function(e){return a=Number(e.target.value),k(a),void t.shift(a);var a},tooltip:"off"})),i.a.createElement("ul",null,i.a.createElement("li",null,"padr\xe3o: ",u.join("")),i.a.createElement("li",null,"tempo: ",m),i.a.createElement("li",null,"instrumento: ",d)),i.a.createElement("div",{className:"controls"},i.a.createElement(E.a,{"aria-label":"Basic example"},i.a.createElement(x.a,{onClick:function(){t.start()}},i.a.createElement(w.a,{icon:y.a})),i.a.createElement(x.a,{onClick:function(){t.stop()}},i.a.createElement(w.a,{icon:y.c})),i.a.createElement(x.a,{onClick:function(){return t.remove(),void j({type:"claves.remove",id:t.id})}},i.a.createElement(w.a,{icon:y.e})))),i.a.createElement("div",{className:"mt-2 volume"},i.a.createElement("span",{className:"mr-2"},"Vol."),i.a.createElement(v.a,{value:c,min:0,max:100,tooltipLabel:function(e){return"".concat(e,"%")},onChange:function(e){return function(e){var a=function(e,t,a,n,i){return n+(i-n)*(e-t)/(a-t)}(e,0,100,0,1);l(e),t.setVolume(a)}(Number(e.target.value))}})))}var C=a(20),S=a(21),N=function(){function e(){Object(C.a)(this,e),this.canvas=null,this.context=null,this.pattern=null,this.tempo=0,this.animate=!1,this.lastRender=Date.now(),this.draw=this.draw.bind(this),this.currentStep=1,this.patternPos={}}return Object(S.a)(e,[{key:"configure",value:function(e,t,a){this.canvas=e,this.context=e.getContext("2d"),this.pattern=t,this.tempo=a}},{key:"setCurrentStep",value:function(e){this.currentStep=e}},{key:"play",value:function(){this.animate=!0,window.requestAnimationFrame(this.draw)}},{key:"pause",value:function(){this.currentStep=1,this.animate=!1}},{key:"draw",value:function(){var e=this.canvas,t=this.context,a=this.pattern,n="20px",i=2,s="#fff",r="#cc2c11",c=4,l="#cc2c11",u="#cc2c11",m=2,p="#fff",d="#fff",f=8,h="#cc2c11",v="#cc2c11",b=[200,200],g=b[0],w=b[1],y=80,E=2*Math.PI/a.length,x=-.5*Math.PI;function k(e,a,n){var i=n.radius,s=n.stroke,r=n.fill;t.strokeStyle=s,t.fillStyle=r,t.beginPath(),t.arc(e,a,i,0,2*Math.PI),t.fill(),t.stroke()}function j(e,t){k(e,t,{radius:c,stroke:l,fill:u})}function O(e,t){k(e,t,{radius:m,stroke:p,fill:d})}e.style.padding=n,e.width=g,e.height=w,t.clearRect(0,0,g,w),t.lineWidth=i,t.strokeStyle=s,t.beginPath(),t.arc(g/2,w/2,y,0,2*Math.PI),t.stroke();var _=[];function q(e,t){return[Math.cos(e)*t+g/2,Math.sin(e)*t+w/2]}for(var P=0;P<a.length;P++){var C=q(x+E*P,y),S=Object(o.a)(C,2),N=S[0],A=S[1];"1"===a[P]?(j(N,A),_.push([N,A])):O(N,A),this.patternPos[P]={x:N,y:A}}_.length>=1&&function(e){t.strokeStyle=r,t.beginPath(),t.moveTo(e[0][0],e[0][1]);for(var a=1;a<e.length;a++)t.lineTo(e[a][0],e[a][1]);t.closePath(),t.stroke()}(_),function(e,t){k(e,t,{radius:f,stroke:h,fill:v})}(this.patternPos[this.currentStep-1].x,this.patternPos[this.currentStep-1].y),this.animate&&window.requestAnimationFrame(this.draw)}}]),e}();function A(){var e=new N,t=Object(n.useRef)(),a=Object(n.useContext)(_).state;return Object(n.useEffect)((function(){t.current&&(e.configure(t.current,a.previewPattern,120),e.draw())}),[a.previewPattern,e]),a.previewPattern&&0!==a.previewPattern.length?i.a.createElement("div",{className:"layer"},i.a.createElement("canvas",{id:g.a.generate(),ref:t,width:640,height:425}),i.a.createElement("p",{className:"Preview"},"Pr\xe9-visualiza\xe7\xe3o")):null}var T,M=a(60),R=a(48),B=a.n(R),L=a(70),I=a.n(L),z=a(71),G=a.n(z),V=a(72),D=a.n(V),F=a(73),H=a.n(F),J=a(74),U=a.n(J),W=a(75),$=a.n(W),X=a(76),K=a.n(X),Q=a(77),Y=a.n(Q),Z=a(78),ee=a.n(Z),te=a(79),ae=a.n(te),ne=a(80),ie=a.n(ne),se=a(81),re=a.n(se),oe=a(82),ce=a.n(oe),le=a(83),ue=a.n(le),me=a(84),pe=a.n(me),de=a(85),fe=a.n(de),he=a(86),ve=a.n(he),be=a(87),ge=a.n(be),we=a(88),ye=a.n(we),Ee=a(89),xe=a.n(Ee),ke=a(90),je=a.n(ke),Oe=a(91),_e=a.n(Oe),qe=a(92),Pe=a.n(qe),Ce=a(93),Se=a.n(Ce),Ne=a(94),Ae=a.n(Ne),Te=a(95),Me=a.n(Te),Re=a(96),Be=a.n(Re),Le=a(97),Ie=a.n(Le),ze=a(98),Ge=a.n(ze),Ve=a(99),De=a.n(Ve),Fe=a(100),He=a.n(Fe),Je=a(101),Ue=a.n(Je),We=a(102),$e=a.n(We),Xe=a(103),Ke=a.n(Xe),Qe=a(104),Ye=a.n(Qe),Ze=a(105),et=a.n(Ze),tt=a(106),at=a.n(tt),nt=a(107),it=a.n(nt),st=a(108),rt=a.n(st),ot=a(109),ct=a.n(ot),lt=a(110),ut=a.n(lt),mt={agogo1:I.a,agogo2:G.a,caxixi:D.a,kick1:H.a,snare:U.a,surdo1:$.a,surdo2:K.a,surdo3:Y.a,surdo4:ee.a,tamborim1:ae.a,tamborim2:ie.a,block1:re.a,block2:ce.a,conga1:ue.a,conga2:pe.a,conga3:fe.a,conga4:ve.a,cowbell:ge.a,egg1:ye.a,egg2:xe.a,xequere1:je.a,xequere2:_e.a,eclap:Pe.a,ehat:Se.a,ekick1:Ae.a,ekik2:Me.a,ekik3:Be.a,esnare:Ie.a,bass:Ge.a,block:De.a,bumbo:He.a,claves:Ue.a,cymbal:$e.a,djembe1:Ke.a,djembe2:Ye.a,djembe3:et.a,hit:at.a,hithat:it.a,kick2:rt.a,kicklow:ct.a,tamborim:ut.a},pt=a(33),dt=(T={},Object(pt.a)(T,g.a.generate(),{name:"Toque Ignbin",instruments:[{sequence:"101101011010",tempo:120,sample:"conga1"}]}),Object(pt.a)(T,g.a.generate(),{name:"Son cubano",instruments:[{sequence:"1001001000101000",tempo:92,sample:"claves"}]}),Object(pt.a)(T,g.a.generate(),{name:"Rumba",instruments:[{sequence:"1001000100101000",tempo:110,sample:"claves"}]}),Object(pt.a)(T,g.a.generate(),{name:"Samba",instruments:[{sequence:"1011010101101010",tempo:60,sample:"tamborim"}]}),T),ft=function(){function e(t,a){Object(C.a)(this,e),this.pulses=t,this.steps=a,this.sequence="",this.createSequence(t,a),this.offset=0}return Object(S.a)(e,[{key:"update",value:function(e,t){this.createSequence(e,t)}},{key:"shift",value:function(e){if(this.offset<e){for(var t=this.sequence.splice(this.sequence.length-1,1),a=0;a<t.length;a++)this.sequence.unshift(t[a]);this.pulses=this.sequence.join(""),this.steps=this.sequence.length}else{for(var n=this.sequence.splice(0,1),i=0;i<n.length;i++)this.sequence.push(n[i]);this.pulses=this.sequence.join(""),this.steps=this.sequence.length}return this.offset=e,this}},{key:"createSequence",value:function(e,t){var a=typeof e;"number"===a?(this.steps=t,this.sequence=B.a.getPattern(e,t),this.pulses=this.sequence.join("")):"string"===a&&(this.steps=e.length,this.sequence=e.split(""))}}]),e}(),ht=a(111),vt=a.n(ht);function bt(e,t){var a=this;if(!e)throw new Error("Context is mandatory");if(!t)throw new Error("Callback is mandatory");this.context=e,this.steps=16,this.tempo=120,this.callback=t,this.look_ahead=1,this._step=1,this._scheduler_interval=20,this._next_event_time=0,this._first=!0,this._is_running=!1,this._worker=vt()(142),this._worker.onmessage=function(e){"tick"===e.data&&a._is_running&&a._scheduler()},this._worker.postMessage({interval:a._scheduler_interval})}bt.prototype.start=function(e){this._is_running?console.log("already started"):(this._is_running=!0,this._worker.postMessage("start"))},bt.prototype.pause=function(){this._is_running=!1,this._worker.postMessage("stop")},bt.prototype.stop=function(){this._first=!0,this._step=1,this._is_running=!1,this._worker.postMessage("stop")},bt.prototype._scheduler=function(){for(1===this._step&&this._first&&(this._next_event_time=this.context.currentTime);this._next_event_time<this.context.currentTime+this.look_ahead;){var e=this._next_event_time-this.context.currentTime;this.callback(this._next_event_time,this._step,e),this._next()}},bt.prototype._next=function(){this._step++,this._first&&(this._next_event_time=this.context.currentTime,this._first=!1),this._step>this.steps&&(this._step=1),this._next_event_time+=60/this.tempo*4/this.steps};var gt=bt,wt=function(){function e(t,a,n,i,s,r){var o=this;Object(C.a)(this,e),this.id=t,this.on=r,this.tempo=n,this.clavis=i,this.context=a,this.pattern=s,this.metro=new gt(a,(function(e,t,a){o.metro.steps!==o.pattern.sequence.length&&(o.metro.steps=o.pattern.sequence.length),"1"===o.pattern.sequence[t-1]?(o.on(e,t,a),setTimeout((function(){i.setCurrentStep(t)}),1e3)):setTimeout((function(){i.setCurrentStep(t)}),1e3)})),this.metro.steps=this.pattern.sequence.length,this.metro.tempo=this.tempo}return Object(S.a)(e,[{key:"start",value:function(){this.metro.start()}},{key:"pause",value:function(){this.metro.pause()}},{key:"stop",value:function(){this.metro.stop()}},{key:"watch",value:function(e){this.metro.tempo=e}}]),e}(),yt=function(){function e(t,a,n,i,s,r){var o=this;if(Object(C.a)(this,e),this.callbackOn=function(e,t){var a=o.context.createGain();a.gain.value=o.volume,a.connect(o.context.destination);var n=o.context.createBufferSource();n.buffer=o.sample,n.connect(a),n.start(e)},this.id=g.a.generate(),this.context=t,this.baseTempo=a,this.pattern=new ft(n),this.tempo=i,this.instrument=s.name,this.sample=s.sample,this.polymetric=r,this.clavis=new N,this.volume=1,this.player=null,this.polymetric){var c=this.baseTempo.length,l=this.pattern.sequence.length;if(l!==c)if(c>l){var u=c/l;this.tempo=(this.tempo*u).toFixed(2)}else{var m=l/c;this.tempo=(this.tempo/m).toFixed(2)}}this.player=new wt(g.a.generate(),this.context,this.tempo,this.clavis,this.pattern,this.callbackOn)}return Object(S.a)(e,[{key:"setVolume",value:function(e){this.volume=e}},{key:"pattern",value:function(e,t){return new ft(e,t)}},{key:"shift",value:function(e){this.pattern=this.pattern.shift(e),this.clavis.draw()}},{key:"remove",value:function(){this.player.stop(),this.clavis.pause()}},{key:"start",value:function(){this.player.start(),this.clavis.play()}},{key:"pause",value:function(){this.player.pause(),this.clavis.pause()}},{key:"stop",value:function(){this.player.stop(),this.clavis.pause()}}]),e}(),Et=a(157);function xt(e){var t=e.show,a=e.onHide,n=e.onConfirm;return i.a.createElement(Et.a,{show:t,onHide:a,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0},i.a.createElement(Et.a.Header,{closeButton:!0},i.a.createElement(Et.a.Title,{id:"contained-modal-title-vcenter"},"Remover todas as guias?")),i.a.createElement(Et.a.Body,null,i.a.createElement("h4",null,"Aten\xe7\xe3o!"),i.a.createElement("p",null,"Voc\xea confirma que deseja apagar todas as guias?")),i.a.createElement(Et.a.Footer,null,i.a.createElement(x.a,{variant:"secondary",onClick:a},"Fechar"),i.a.createElement(x.a,{onClick:n},"Remover")))}var kt=a(155),jt=a(115),Ot=a(158),_t=a(159);var qt=function(){var e=Object(l.f)(),t=Object(n.useState)(!1),a=Object(o.a)(t,2),s=a[0],r=a[1],c=Object(n.useState)("agogo1"),u=Object(o.a)(c,2),m=u[0],p=u[1],d=Object(n.useState)(120),f=Object(o.a)(d,2),h=f[0],v=f[1],b=Object(n.useContext)(_).dispatch,k=Object(n.useContext)(_).state,j=k.claves,O=k.instruments,q=k.context,P=k.previewPattern,C=k.polymetric,S=k.previewVisibility,N=k.shareableLink,A=Object(n.useState)(!1),T=Object(o.a)(A,2),R=T[0],L=T[1],I=j.length>0,z=Object(n.useRef)(null),G="";j.length>0&&(G=j[0].pattern.sequence.join(""));var V=function(){var e,t=Object(M.a)(j);try{for(t.s();!(e=t.n()).done;){e.value.stop()}}catch(a){t.e(a)}finally{t.f()}b({type:"stop.all",isPlaying:!0})};return i.a.createElement("div",{className:"toolbar"},i.a.createElement(xt,{show:R,onHide:function(){return L(!1)},onConfirm:function(){return V(),b({type:"claves.removeAll"}),void L(!1)}}),i.a.createElement("div",{className:"toolbar-controls"},i.a.createElement(E.a,{"aria-label":"Basic example"},i.a.createElement(x.a,{onClick:function(){return function(){var e,t=Object(M.a)(j);try{for(t.s();!(e=t.n()).done;){e.value.start()}}catch(a){t.e(a)}finally{t.f()}}()}},i.a.createElement(w.a,{icon:y.a})),i.a.createElement(x.a,{onClick:function(){return V()}},i.a.createElement(w.a,{icon:y.c})),i.a.createElement(x.a,{onClick:function(){return L(!0)},disabled:!I},i.a.createElement(w.a,{icon:y.d})))),i.a.createElement("div",{className:"toolbar-form"},i.a.createElement(kt.a,null,i.a.createElement(kt.a.Prepend,null,i.a.createElement(kt.a.Text,{id:"basic-addon3"},"Padr\xe3o")),i.a.createElement(jt.a,{placeholder:"1010101 ou 3,4",ref:z,onChange:function(e){return function(e){var t=new RegExp("^(\\d+),(\\d+)$"),a=new RegExp("^[0-1]{1,}$");if(t.test(e)){var n=e.split(",").map((function(e){return parseInt(e)})).sort((function(e,t){return e-t})),i=Object(o.a)(n,2),s=i[0],c=i[1],l=B.a.getPattern(s,c).join("");b({type:"previewPattern.update",pattern:l}),r(!1)}else a.test(e)?(b({type:"previewPattern.update",pattern:e}),r(!1)):r(!0);""===e&&(b({type:"previewPattern.update",pattern:e}),r(!1)),S||b({type:"preview.visibility",visible:!0})}(e.target.value)},isInvalid:s})),i.a.createElement(kt.a,null,i.a.createElement(kt.a.Prepend,null,i.a.createElement(kt.a.Text,{id:"basic-addon3"},"Tempo")),i.a.createElement(jt.a,{placeholder:"tempo",value:h,onChange:function(e){return v(e.target.value)}})),i.a.createElement(Ot.a.Control,{as:"select",onChange:function(e){return p(e.target.value)}},i.a.createElement("option",null,"Instrumentos"),Object.keys(mt).map((function(e,t){return i.a.createElement("option",{key:t,value:e},e)}))),i.a.createElement(Ot.a.Check,{inline:!0,className:"ml-2 polymetric",type:"checkbox",label:"Polimetria",checked:C,onChange:function(){return b({type:"toggle.polymetric"})},disabled:!I}),i.a.createElement(x.a,{className:"ml-2",onClick:function(){return function(){var e=new yt(q,G,P,h,{name:m,sample:O[m]},C);b({type:"claves.add",id:g.a.generate(),clave:e}),b({type:"previewPattern.update",pattern:P}),b({type:"preview.visibility",visible:!1}),b({type:"start.all"})}()},disabled:s||0===P.length},"Adicionar"),i.a.createElement(_t.a,{className:"ml-2"},i.a.createElement(_t.a.Toggle,{variant:"info",id:"dropdown-basic"},"presets"),i.a.createElement(_t.a.Menu,null,Object.keys(dt).map((function(e,t){return i.a.createElement(_t.a.Item,{key:t,onClick:function(){return dt[e].instruments.forEach((function(e){var t=e.sequence,a=e.tempo,n=e.sample,i=new yt(q,G,t,a,{name:n,sample:O[n]});b({type:"claves.add",id:g.a.generate(),clave:i})})),void b({type:"start.all"})}},dt[e].name)})))),i.a.createElement(x.a,{onClick:function(){return function(){var t=j.map((function(e){return{sequence:e.pattern.sequence.join(""),tempo:e.tempo,sample:e.instrument}})),a=JSON.stringify(t);a!==N&&(V(),b({type:"claves.share",shareableLink:a}),b({type:"claves.removeAll"}),e.push("/guias?guias=".concat(a)))}()},disabled:!I},i.a.createElement(w.a,{icon:y.b}))))};var Pt=function(){var e=i.a.useContext(_).state,t=Object(n.useContext)(_).dispatch,a=new URLSearchParams(Object(l.g)().search).get("guias"),s=JSON.parse(a),r=function(){var a=Object(f.a)(d.a.mark((function a(n){return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,n.forEach((function(a){var n=a.sequence,i=a.tempo,s=a.sample,r=new yt(e.context,120,n,i,{name:s,sample:e.instruments[s]});return t({type:"claves.add",id:g.a.generate(),clave:r})}));case 2:t({type:"claves.share"});case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return Object(n.useEffect)((function(){a&&s&&r(s)}),[a]),i.a.createElement("div",{className:"App"},i.a.createElement(qt,null),i.a.createElement("div",{className:"wrapper"},e.claves.map((function(e){return i.a.createElement(P,{key:e.id,clave:e})})),e.previewVisibility&&i.a.createElement(A,null)))},Ct=a(116),St=a(161),Nt=a(160);var At=function(){return i.a.createElement(St.a,{collapseOnSelect:!0,bg:"black",expand:"lg",variant:"black"},i.a.createElement(St.a.Brand,null,i.a.createElement("h3",null,i.a.createElement(c.b,{to:"/"},"Polymatic ",i.a.createElement("small",null,Ct.version)))),i.a.createElement(Nt.a,{className:"mr-auto"},i.a.createElement(Nt.a,null,i.a.createElement(c.b,{to:"/sobre"},"sobre"))))},Tt=function(){function e(t,a,n){Object(C.a)(this,e),this.context=t,this.instruments=a,this.onload=n,this.bufferList={},this.loadCount=0}return Object(S.a)(e,[{key:"loadBuffer",value:function(e,t){var a=this,n=new XMLHttpRequest;n.open("GET",this.instruments[e],!0),n.responseType="arraybuffer",n.onload=function(){a.context.decodeAudioData(n.response,(function(t){t?(a.bufferList[e]=t,++a.loadCount===Object.keys(a.instruments).length&&a.onload(a.bufferList)):alert("error decoding file data: "+e)}),(function(e){console.error("decodeAudioData error",e)}))},n.onerror=function(){alert("BufferLoader: XHR error")},n.send()}},{key:"load",value:function(){var e=this;Object.keys(this.instruments).forEach((function(t){e.loadBuffer(t)}))}}]),e}(),Mt=(a(147),a(148),a(156)),Rt=new(window.AudioContext||window.webkitAudioContext);var Bt=function(){var e=Object(n.useState)(!0),t=Object(o.a)(e,2),a=t[0],s=t[1];u.a.initialize("UA-160360260-2"),u.a.pageview(window.location.pathname+window.location.search);var r=Object(n.useContext)(_).dispatch;return Object(n.useEffect)((function(){new Tt(Rt,mt,(function(e){r({type:"load.app",instruments:e,context:Rt}),s(!1)})).load()}),[r]),a?i.a.createElement(Mt.a,{animation:"border",role:"status"},i.a.createElement("span",{className:"sr-only"},"Loading...")):i.a.createElement(c.a,{basename:"/"},i.a.createElement(At,null),i.a.createElement(l.c,null,i.a.createElement(l.a,{exact:!0,path:"/",component:Pt}),i.a.createElement(l.a,{exact:!0,path:"/sobre",component:m}),i.a.createElement(l.a,{exact:!0,path:"/guias",component:Pt})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(q,null,i.a.createElement(Bt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}]),[[121,1,2]]]);
//# sourceMappingURL=main.90451ebd.chunk.js.map